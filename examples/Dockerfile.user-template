# ServeM User Dockerfile Template
# 
# This Dockerfile bundles your documentation into a standalone container.
# 
# Usage:
#   1. Copy this file to your docs directory as "Dockerfile"
#   2. Run: docker build -t my-docs:latest .
#   3. Run: docker run -p 8080:8080 my-docs:latest
#   4. Visit: http://localhost:8080

# Use the official servemd image from Docker Hub
FROM docker.io/jberends/servemd:latest

# Copy your documentation into the container
# DOCS_ROOT is set to /app/__docs__ in the base image
COPY . /app/__docs__/

# Optional: Set your production URL for llms.txt and MCP absolute links
ENV BASE_URL=https://docs.yourcompany.com

# Optional: Disable debug mode in production
ENV DEBUG=false

# Optional: Configure MCP settings
# ENV MCP_ENABLED=true
# ENV MCP_RATE_LIMIT_REQUESTS=120
# ENV MCP_RATE_LIMIT_WINDOW=60

# The base image already configures:
# - DOCS_ROOT=/app/__docs__
# - CACHE_ROOT=/app/__cache__
# - PORT=8080
# - Python 3.11-3.14 support
# - All dependencies (FastAPI, Whoosh, etc.)
# - CMD to start the server
# - Health check at /health
# - MCP endpoint at /mcp

# Optional: Add custom assets or preprocessing
# RUN some-preprocessing-script.sh

# That's it! Your documentation is now bundled in this image.
# 
# Build:  docker build -t my-docs:latest .
# Run:    docker run -p 8080:8080 my-docs:latest
# Push:   docker tag my-docs:latest docker.io/mycompany/docs:latest
#         docker push docker.io/mycompany/docs:latest
